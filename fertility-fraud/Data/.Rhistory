filter(!is.na(state_name) & is.na(total_pop))
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus)) %>%
filter(!is.na(state_name) & is.na(total_pop))
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus)) %>%
filter(!is.(state_name) & is.na(total_pop))
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus)) %>%
filter(!is.na(state_name.x)) & is.na(total_pop))
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus) %>%
filter(!is.na(state_name.x)) & is.na(total_pop))
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus) %>%
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus) %>%
filter(!is.na(state_name)) & !is.na(total_pop))
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus) %>%
filter(!is.na(state_name)) & !is.na(total_pop))
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus)) %>%
filter(!is.na(state_name)) & !is.na(total_pop))
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus)) %>%
state_pop <- zip %/%
filter(!is.na(state_name)) & !is.na(total_pop)
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus)) %>%
state_pop <- zip %/%
filter(!is.na(state_name)) & !is.na(total_pop)
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus))
state_pop <- zip %/%
filter(!is.na(state_name)) & !is.na(total_pop)
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus)) %>%
filter(!is.na(state_name)) & !is.na(total_pop)
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus)) %>%
filter(!is.na(total_pop)
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus)) %>%
filter(!is.na(total_pop))
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus)) %>%
filter(!is.na(total_pop) & !is.na(state_name.x))
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus)) %>%
filter(!is.na(total_pop) & !is.na(state_name))
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
state_pop <- zip %>%
group_by(state_id, state_name) %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus)) %>%
filter(!is.na(total_pop) & !is.na(state_name))
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
select(zip, city, state_id, state_name)
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
select(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
select(location_desc) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(location_desc) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
join <- state_pop %>%
full_join(centers_state_summary, by ="state_id")
centers_state_summary <- centers %>%
group_by(location_desc) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
join <- state_pop %>%
full_join(centers_state_summary, by ="location_desc")
centers_state_summary <- centers %>%
group_by(state.abb) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(State_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
knitr::opts_chunk$set(echo = TRUE)
centers <- read_csv("Input/2021_ART__Patient_and_Cycle_Characteristics_20240530.csv") %>%
clean_names()
View(state_pop)
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by("state_id") %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by("state_id") %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by("state_id") %>%
summarise(centers = n_distinct("clinic_id"),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
install.packages("dplyr")
library(dplyr)
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
install.packages("dplyr")
library(dplyr)
centers <- centers %>%
rename(location_abbr = state_id)
knitr::opts_chunk$set(echo = TRUE)
centers <- centers %>%
rename(state_id = location_abbr)
# Load the dplyr package
library(dplyr)
# Rename the column in the centers data frame
centers <- centers %>%
rename(state_id = location_abbr)
# Summarise the centers data frame
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
# Join the state_pop and centers_state_summary data frames
join <- state_pop %>%
full_join(centers_state_summary, by = "state_id") %>%
mutate(cycles_per_females = cycles / (females_16plus / 1000),
cycles_per_females = round(cycles_per_females, 3))
# Print the first few rows of the result to verify
print(head(join))
View(join)
# Load the dplyr package
library(dplyr)
# Rename the column in the centers data frame
centers <- centers %>%
rename(state_id = location_abbr)
# Load the dplyr package
library(dplyr)
# Summarise the centers data frame
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
# Join the state_pop and centers_state_summary data frames
join <- state_pop %>%
full_join(centers_state_summary, by = "state_id") %>%
mutate(cycles_per_females = cycles / (females_16plus / 1000),
cycles_per_females = round(cycles_per_females, 3))
centers %>%
filter(!clinic_id == "9999") %>%
count(n_distinct(clinic_id))
# 453 clinics in data
centers %>%
filter(question_id == "Q004" & ! is.na(cycle_count) & !clinic_id == "9999") %>%
select(clinic_id, year, facility_name, medical_director, address, city,
state_id = location_abbr, state_name = location_desc, zip_code, clinic_status, cycle_count) %>%
unique()
centers %>%
filter(!clinic_id == "9999") %>%
count(n_distinct(clinic_id))
# 453 clinics in data
centers %>%
filter(question_id == "Q004" & ! is.na(cycle_count) & !clinic_id == "9999") %>%
select(clinic_id, year, facility_name, medical_director, address, city,
state_id = location_abbr, state_name = location_desc, zip_code, clinic_status, cycle_count) %>%
unique()
knitr::opts_chunk$set(echo = TRUE)
centers <- read_csv("Input/2021_ART__Patient_and_Cycle_Characteristics_20240530.csv") %>%
clean_names()
library(tidyverse)
install.packages("janitor")
library(janitor)
install.packages("tidycensus")
library(tidycensus)
knitr::opts_chunk$set(echo = TRUE)
centers <- read_csv("Input/2021_ART__Patient_and_Cycle_Characteristics_20240530.csv") %>%
clean_names()
centers %>%
filter(!clinic_id == "9999") %>%
count(n_distinct(clinic_id))
# 453 clinics in data
centers %>%
filter(question_id == "Q004" & ! is.na(cycle_count) & !clinic_id == "9999") %>%
select(clinic_id, year, facility_name, medical_director, address, city,
state_id = location_abbr, state_name = location_desc, zip_code, clinic_status, cycle_count) %>%
unique()
# Load the dplyr package
library(dplyr)
# Summarise the centers data frame
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
# Load the dplyr package
library(dplyr)
# Summarise the centers data frame
centers_state_summary <- centers %>%
group_by(location_abbr) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
# Join the state_pop and centers_state_summary data frames
join <- state_pop %>%
full_join(centers_state_summary, by = "state_id") %>%
mutate(cycles_per_females = cycles / (females_16plus / 1000),
cycles_per_females = round(cycles_per_females, 3))
# Load the dplyr package
library(dplyr)
# Summarise the centers data frame
centers_state_summary <- centers %>%
group_by(location_abbr) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers_state_summary %>%
rename(state_id = location_abbr)
# Join the state_pop and centers_state_summary data frames
join <- state_pop %>%
full_join(centers_state_summary, by = "state_id") %>%
mutate(cycles_per_females = cycles / (females_16plus / 1000),
cycles_per_females = round(cycles_per_females, 3))
View(join)
View(join)
View(centers)
View(centers_state_summary)
View(dhc_vars)
View(dp_vars)
View(join)
View(state_pop)
install.packages("dplyr")
knitr::opts_chunk$set(echo = TRUE)
# Load the dplyr package
library(dplyr)
# Summarise the centers data frame
centers_state_summary <- centers %>%
group_by(location_abbr) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers_state_summary %>%
rename(state_id = location_abbr)
# Join the state_pop and centers_state_summary data frames
join <- state_pop %>%
full_join(centers_state_summary, by = "state_id") %>%
mutate(cycles_per_females = cycles / (females_16plus / 1000),
cycles_per_females = round(cycles_per_females, 3))
/Users/charlenelin/Desktop/masters_project/CDC_data_R/Output <- "state_pop.csv"
Users/charlenelin/Desktop/masters_project/CDC_data_R/Output <- "state_pop.csv"
/masters_project/CDC_data_R/Output <- "state_pop.csv"
masters_project/CDC_data_R/Output <- "state_pop.csv"
CDC_data_R/Output <- "state_pop.csv"
Output <- "state_pop.csv"
# Write the dataframe to a CSV file
write.csv(state_pop, file_path, row.names = FALSE)
Output <- "state_pop.csv"
# Write the dataframe to a CSV file
write.csv(state_pop, Output, row.names = FALSE)
library(tidyverse)
#install.packages("janitor")
library(janitor)
#install.packages("tidycensus")
library(tidycensus)
centers <- read_csv("Input/2021_ART__Patient_and_Cycle_Characteristics_20240530.csv") %>%
clean_names()
View(centers)
census_api_key("a05bd3a5ffc1c1ec5b71f6ea187226b05168a19a", install = TRUE, overwrite=TRUE)
rm(vars)
dp_vars <- load_variables(2020, "dp", cache = TRUE)
dhc_vars <- load_variables(2020, "dhc", cache = TRUE)
zip <- get_decennial(geography = "zcta",
variables = c(females_16plus = "DP1_0068C",
#count of women 16+ yo
total_pop = "DP1_0001C"),
year = 2020,
sumfile = "dp")
zip <- zip %>%
select(zip = NAME,
variable,
value) %>%
spread(variable, value)
zip <- zip %>%
mutate(zip=str_remove(zip, "ZCTA5 "))
View(zip)
centers %>%
filter(question_id == "Q005" & ! is.na(cycle_count) & !clinic_id == "9999") %>%
select(clinic_id, year, facility_name, medical_director, address, city,
state_id = location_abbr, state_name = location_desc, zip_code, clinic_status, cycle_count) %>%
unique()
centers <- centers %>%
filter(question_id == "Q005" & ! is.na(cycle_count) & !clinic_id == "9999") %>%
select(clinic_id, year, facility_name, medical_director, address, city,
state_id = location_abbr, state_name = location_desc, zip_code, clinic_status, cycle_count) %>%
unique()
View(centers)
zip_details <- read_csv("Input/uszips.csv") %>%
select(zip, city, state_id, state_name)
zip <- zip %>%
full_join(zip_details, by = "zip")
rm(zip_details)
View(zip)
state_pop <- zip %>%
group_by(state_id, state_name) %>%
summarise(total_pop = sum(total_pop),
females_16plus = sum(females_16plus)) %>%
filter(!is.na(total_pop) & !is.na(state_name))
View(state_pop)
# Load the dplyr package
library(dplyr)
# Summarise the centers data frame
centers_state_summary <- centers %>%
group_by(location_abbr) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
# Load the dplyr package
library(dplyr)
# Summarise the centers data frame
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
centers_state_summary <- centers_state_summary %>%
rename(state_id = location_abbr)
# Load the dplyr package
library(dplyr)
# Summarise the centers data frame
centers_state_summary <- centers %>%
group_by(state_id) %>%
summarise(centers = n_distinct(clinic_id),
cycles = sum(cycle_count))
# Join the state_pop and centers_state_summary data frames
join <- state_pop %>%
full_join(centers_state_summary, by = "state_id") %>%
mutate(cycles_per_females = cycles / (females_16plus / 1000),
cycles_per_females = round(cycles_per_females, 3))
View(join)
zip %>%
group_by(state_id) %>%
mutate(n_zips = n_distinct(zip))
zip %>%
group_by(state_id) %>%
summarise(n_zips = n_distinct(zip))
test <- zip %>%
group_by(state_id) %>%
summarise(n_zips = n_distinct(zip))
